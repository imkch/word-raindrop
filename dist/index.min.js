!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).WordRaindrop=e()}(this,(function(){"use strict";return class{constructor(t,e){if(void 0===t)throw new Error("target is undefined");this.targetElement="string"==typeof t?document.getElementById(t):t,this.options=Object.assign({text:"01",fontSize:18,fontFamily:"arial",textColor:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.1)",speed:8},e),window.requestAnimationFrame=this.requestAnimationFrame(),this.execute()}execute(){const{speed:t,backgroundColor:e,text:n,textColor:i,fontSize:o}=this.options,r=this.createCanvas(),s=r.getContext("2d"),a=this.initTextPosition(r);let d=0;const l=()=>{if(d++,d===t){d=0,s.fillStyle=e,s.fillRect(0,0,r.width,r.height),s.fillStyle=i;for(let t=0;t<a.length;t++){a[t]++;const e=Math.floor(Math.random()*n.length),i=n[e],d=t*o,l=a[t]*o;s.fillText(i,d,l),l>r.height&&Math.random()>.8&&(a[t]=0)}}window.requestAnimationFrame(l)};l()}requestAnimationFrame(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}createCanvas(){const t=document.createElement("canvas");this.targetElement.appendChild(t);const e=this.targetElement.clientWidth,n=this.targetElement.clientHeight;t.width=e,t.height=n;const i=t.getContext("2d"),{fontSize:o,fontFamily:r}=this.options;return i.font=`${o}px ${r}`,t}initTextPosition(t){const{fontSize:e}=this.options,n=t.height/e,i=t.width/e,o=[];for(let t=0;t<i;t++){const t=Math.floor(Math.random()*n);o.push(t)}return o}}}));
